{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d46089ba_fbaf3902",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 15,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2025-10-23T12:57:51Z",
      "side": 1,
      "message": "Add Testing details please. How does this show up on Redfish?",
      "revId": "771af740a6149b9aa1476ac2c2606bbf5c5b55c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "faa01d6f_d6a2ea0b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 15,
      "author": {
        "id": 1001526
      },
      "writtenOn": "2025-10-27T02:55:51Z",
      "side": 1,
      "message": "There\u0027s currently no Redfish representation for this metric namespace. This will just be exposed on D-Bus.",
      "parentUuid": "d46089ba_fbaf3902",
      "revId": "771af740a6149b9aa1476ac2c2606bbf5c5b55c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ef156e32_a6646d39",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 15,
      "author": {
        "id": 1000206
      },
      "writtenOn": "2025-10-27T09:07:49Z",
      "side": 1,
      "message": "I think this will be a good value add to the redfish specification as well @chaul@amperecomputing.com - do you have an ampere representative for Redfish workgroup who can propose this change to https://redfish.dmtf.org/schemas/v1/Sensor.v1_11_0.json ?\n\nBut this can go on in parallel \u0026 should not block this review.",
      "parentUuid": "faa01d6f_d6a2ea0b",
      "revId": "771af740a6149b9aa1476ac2c2606bbf5c5b55c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "81cfea77_9ac76dfe",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 15,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2025-10-27T09:49:02Z",
      "side": 1,
      "message": "Need to get confidence that we\u0027re building the API correctly, especially when there are no OpenBMC users (apps) consuming this.",
      "parentUuid": "ef156e32_a6646d39",
      "revId": "771af740a6149b9aa1476ac2c2606bbf5c5b55c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f22aece8_1e2ff693",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 15,
      "author": {
        "id": 1000945
      },
      "writtenOn": "2025-10-28T09:34:36Z",
      "side": 1,
      "message": "The Sensor schemas is used to report the sensors which include `/xyz/openbmc_project/Sensor/Value.interface.yaml` interface. Those are real hardware sensors.\nWhile `xyz/openbmc_project/Metric/Value.interface.yaml` provides the Board Manager Metric values for resource utilization.\nFor each type of resource we will need different Redfish schemas for them.\n\nI agree with @deepak.kodihalli.83@gmail.com that there is no consumer of this file_size object paths. They are internally used by pldm file transfer to check the file size. So I think we don\u0027t need report to user.",
      "parentUuid": "81cfea77_9ac76dfe",
      "revId": "771af740a6149b9aa1476ac2c2606bbf5c5b55c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "89ad8eab_f5ce8312",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 15,
      "author": {
        "id": 1001526
      },
      "writtenOn": "2025-11-05T09:37:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f22aece8_1e2ff693",
      "revId": "771af740a6149b9aa1476ac2c2606bbf5c5b55c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d84de94_70bc9a3d",
        "filename": "platform-mc/numeric_sensor.cpp",
        "patchSetId": 8
      },
      "lineNbr": 161,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2025-10-23T12:57:51Z",
      "side": 1,
      "message": "Where is this path segment documented?",
      "range": {
        "startLine": 161,
        "startChar": 59,
        "endLine": 161,
        "endChar": 68
      },
      "revId": "771af740a6149b9aa1476ac2c2606bbf5c5b55c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "932abb0b_aa3b85be",
        "filename": "platform-mc/numeric_sensor.cpp",
        "patchSetId": 8
      },
      "lineNbr": 161,
      "author": {
        "id": 1001526
      },
      "writtenOn": "2025-10-27T02:55:51Z",
      "side": 1,
      "message": "So I need to add path segment definitions for `metric/file_size`, `metric/count` and `metric/oem` to PDI, right?",
      "parentUuid": "3d84de94_70bc9a3d",
      "range": {
        "startLine": 161,
        "startChar": 59,
        "endLine": 161,
        "endChar": 68
      },
      "revId": "771af740a6149b9aa1476ac2c2606bbf5c5b55c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d8e52024_9dc27de2",
        "filename": "platform-mc/numeric_sensor.cpp",
        "patchSetId": 8
      },
      "lineNbr": 161,
      "author": {
        "id": 1000206
      },
      "writtenOn": "2025-10-27T09:07:49Z",
      "side": 1,
      "message": "Yes, Since this should be a common understanding between companies. I think its worth to get these path segments added to the PDI https://github.com/openbmc/phosphor-dbus-interfaces/blob/master/yaml/xyz/openbmc_project/Metric/Value.interface.yaml#L60 before we merge this in pldm.",
      "parentUuid": "932abb0b_aa3b85be",
      "range": {
        "startLine": 161,
        "startChar": 59,
        "endLine": 161,
        "endChar": 68
      },
      "revId": "771af740a6149b9aa1476ac2c2606bbf5c5b55c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "28b2e159_26552a84",
        "filename": "platform-mc/numeric_sensor.cpp",
        "patchSetId": 8
      },
      "lineNbr": 161,
      "author": {
        "id": 1000945
      },
      "writtenOn": "2025-10-28T09:34:36Z",
      "side": 1,
      "message": "Actually, the file size objects path is internal using by pldm file transfer to check the size of file before getting it.\n\nThe reason of adding the D-Bus interface for those sensors are `platform-mc` is designed to public all of numeric sensors or compact numeric sensors to D-Bus and there is no exception. That why we added the `/xyz/openbmc_project/metric/file_size/` object path for sensor with byte base unit.\n\nSo as my opinion. we don\u0027t need to update the https://github.com/openbmc/phosphor-dbus-interfaces/blob/master/yaml/xyz/openbmc_project/Metric/Value.interface.yaml#L60.\n\nThe name space in `/Metric/Value.interface.yaml#L60` is very specific, but we don\u0027t have those kind of specific info in the File PDRs. So we can\u0027t add the name space for this kind of object path.",
      "parentUuid": "d8e52024_9dc27de2",
      "range": {
        "startLine": 161,
        "startChar": 59,
        "endLine": 161,
        "endChar": 68
      },
      "revId": "771af740a6149b9aa1476ac2c2606bbf5c5b55c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e6561c25_423e8eb8",
        "filename": "platform-mc/numeric_sensor.cpp",
        "patchSetId": 8
      },
      "lineNbr": 161,
      "author": {
        "id": 1001526
      },
      "writtenOn": "2025-10-29T09:32:58Z",
      "side": 1,
      "message": "Right, this sensor object is present just because the FileDescriptor object implemented in https://gerrit.openbmc.org/c/openbmc/pldm/+/82472 needs its value to fill in the file object\u0027s size property, and the value needs to be polled periodically together with other Numeric sensors. So I suppose we can either leave this path segment out of the PDI or reimplement the NumericSensor class so that it can still construct sensors with un-supported units to register them to the polling queue without exposing them to D-Bus. Those sensors are to be accessed internally by pldmd.",
      "parentUuid": "28b2e159_26552a84",
      "range": {
        "startLine": 161,
        "startChar": 59,
        "endLine": 161,
        "endChar": 68
      },
      "revId": "771af740a6149b9aa1476ac2c2606bbf5c5b55c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3fc30706_c8f4ca08",
        "filename": "platform-mc/numeric_sensor.cpp",
        "patchSetId": 8
      },
      "lineNbr": 161,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2025-10-29T10:01:32Z",
      "side": 1,
      "message": "If these are internal to pldmd, why even expose on D-Bus?",
      "parentUuid": "e6561c25_423e8eb8",
      "range": {
        "startLine": 161,
        "startChar": 59,
        "endLine": 161,
        "endChar": 68
      },
      "revId": "771af740a6149b9aa1476ac2c2606bbf5c5b55c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "117ad146_06b53c63",
        "filename": "platform-mc/numeric_sensor.cpp",
        "patchSetId": 8
      },
      "lineNbr": 161,
      "author": {
        "id": 1000945
      },
      "writtenOn": "2025-10-31T01:04:09Z",
      "side": 1,
      "message": "The current framework of platform-mc base on the idea all of the compact numeric sensors/numeric sensors will have one numericSensor class with none empty D-Bus sensor object path. The sensor reading timer will go through list of NumericSensors objects, read sensors value and update the read value to Value D-Bus interface or Metric D-Bus interfaces.\n\nSo to support the PLDM numeric sensor PDR with base unit is byte and entity type is DeviceFile, we still need create Numeric sensors class for them with none empty object path. We also need the sensor polling update the value of those fileSize sensors.\n\nBecause PDR is `platform description` public or none public can be different between the OEM/ODM so my idea is just public them to D-Bus. The consumer will decide whether they care about them.\n\n@chaul@amperecomputing.com, please add the checking for PDR entity type, when they are deviceFile we will apply `sensorNameSpace \u003d \"/xyz/openbmc_project/metric/file_size/\";` object path.",
      "parentUuid": "3fc30706_c8f4ca08",
      "range": {
        "startLine": 161,
        "startChar": 59,
        "endLine": 161,
        "endChar": 68
      },
      "revId": "771af740a6149b9aa1476ac2c2606bbf5c5b55c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fbc40171_6c467224",
        "filename": "platform-mc/numeric_sensor.cpp",
        "patchSetId": 8
      },
      "lineNbr": 161,
      "author": {
        "id": 1001526
      },
      "writtenOn": "2025-11-05T09:37:54Z",
      "side": 1,
      "message": "I updated following the suggestion. Let\u0027s just use \"/xyz/openbmc_project/metric/file_size/\" namespace for a sensor with a Bytes unit and has an EntityType of DeviceFile, which indicates that it\u0027s a File Size Monitoring sensor. As it\u0027s not consumed anywhere so let\u0027s not add it to PDI for this patch, at least until we come up with a correct move for the NumericSensor class, but not in this patch.",
      "parentUuid": "117ad146_06b53c63",
      "range": {
        "startLine": 161,
        "startChar": 59,
        "endLine": 161,
        "endChar": 68
      },
      "revId": "771af740a6149b9aa1476ac2c2606bbf5c5b55c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f3cb1732_d489e4c8",
        "filename": "platform-mc/numeric_sensor.cpp",
        "patchSetId": 8
      },
      "lineNbr": 161,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2026-02-09T17:34:15Z",
      "side": 1,
      "message": "\u003e If these are internal to pldmd, why even expose on D-Bus?\n\nI had this same question as I reviewed the code. Further, we have the file size in two places because it is also included in the Pldm.File interface as a property is it not?\n\n\u003e  with none empty object path.\n\nCouldn\u0027t the code that assumes a non-empty path be enhanced to cope with an empty path?",
      "parentUuid": "fbc40171_6c467224",
      "range": {
        "startLine": 161,
        "startChar": 59,
        "endLine": 161,
        "endChar": 68
      },
      "revId": "771af740a6149b9aa1476ac2c2606bbf5c5b55c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6d84e519_dfdd674c",
        "filename": "platform-mc/numeric_sensor.cpp",
        "patchSetId": 8
      },
      "lineNbr": 161,
      "author": {
        "id": 1001526
      },
      "writtenOn": "2026-02-10T10:19:48Z",
      "side": 1,
      "message": "This would take rigid reasons and PDI adding process to have a namespace for this specific sensor. So I updated the code to allow the creation of this sensor type without a D-Bus representation. So, sensors with unsupported units will still get polled and their info will be kept internally as member variable to the NumericSensor\u0027s object.",
      "parentUuid": "f3cb1732_d489e4c8",
      "range": {
        "startLine": 161,
        "startChar": 59,
        "endLine": 161,
        "endChar": 68
      },
      "revId": "771af740a6149b9aa1476ac2c2606bbf5c5b55c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}