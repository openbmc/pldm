{
  "comments": [
    {
      "key": {
        "uuid": "d6112c66_49c38f60",
        "filename": "oem/ibm/libpldmresponder/file_io_type_pel.cpp",
        "patchSetId": 2
      },
      "lineNbr": 286,
      "author": {
        "id": 1000181
      },
      "writtenOn": "2021-07-01T09:30:22Z",
      "side": 1,
      "message": "which file name does it create?",
      "range": {
        "startLine": 285,
        "startChar": 4,
        "endLine": 286,
        "endChar": 76
      },
      "revId": "60edb7636818b7d62c1b9aaa3a9a8f34f2c53346",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e756f438_bd7b65bb",
        "filename": "oem/ibm/libpldmresponder/file_io_type_pel.cpp",
        "patchSetId": 2
      },
      "lineNbr": 286,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2021-07-07T23:39:22Z",
      "side": 1,
      "message": "This code should be improved to be obviously correct. If we must have a named file this needs to use mkostemp() to eliminate the concept of races, and to specify additional flags like O_SYNC. O_WRONLY is a minor restriction over the default O_RDWR that we can ignore to make use of mkostemp(), and additionally the mktemp() family enforce O_CREAT | O_EXCL to make sure the file is unique which eliminates the need for O_TRUNC.\n\nIt would be better if storePel() took a file descriptor instead, and then you could use open() with O_TMPFILE with /tmp as the directory and avoid the naming problem altogether.",
      "parentUuid": "d6112c66_49c38f60",
      "range": {
        "startLine": 285,
        "startChar": 4,
        "endLine": 286,
        "endChar": 76
      },
      "revId": "60edb7636818b7d62c1b9aaa3a9a8f34f2c53346",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4a9b1592_5b7d4a09",
        "filename": "oem/ibm/libpldmresponder/file_io_type_pel.cpp",
        "patchSetId": 2
      },
      "lineNbr": 286,
      "author": {
        "id": 1000181
      },
      "writtenOn": "2021-07-08T05:14:35Z",
      "side": 1,
      "message": "on the same line with my previous question, the tmpFile gets created with same name every time. that leads to error in the pel files when HB sends down consecutive pels.\npls change the code to use mkstemp as we are doing in the dma write",
      "parentUuid": "e756f438_bd7b65bb",
      "range": {
        "startLine": 285,
        "startChar": 4,
        "endLine": 286,
        "endChar": 76
      },
      "revId": "60edb7636818b7d62c1b9aaa3a9a8f34f2c53346",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "689fee22_efc169cb",
        "filename": "oem/ibm/libpldmresponder/file_io_type_pel.cpp",
        "patchSetId": 2
      },
      "lineNbr": 289,
      "author": {
        "id": 1000092
      },
      "writtenOn": "2021-07-08T05:34:44Z",
      "side": 1,
      "message": "Is this not \"file open failure\" and not seek",
      "revId": "60edb7636818b7d62c1b9aaa3a9a8f34f2c53346",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}